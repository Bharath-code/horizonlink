System Design Overview                                                                                                                                                                                                                                                                                                                                                Architecture Summary                                                                                                                                                               •  Clients: Android sharer app, Android/Fire TV app, optional receiver mobile app, Google Assistant action, Alexa skill.                                                           •  Edge services: FCM for push to Android devices, SNS/Lambda (or equivalent) for TV/Alexa notifications, Dialogflow/Alexa APIs for voice queries.                                 •  Core backend: API Gateway + Auth service, Location ingest service (queue + worker), Location store (NoSQL for latest state + time-series DB for history), ETA                      service (maps API integration), Subscription service, Notification dispatcher.                                                                                                  •  Observability & Ops: Central logging, metrics, alerting, feature flags, configuration service.                                                                                                                                                                                                                                                                     Component Responsibilities                                                                                                                                                                                                                                                                                                                                            Android Sharer App                                                                                                                                                                 •  Authenticated device binding, periodic GPS capture respecting battery (Fused Location Provider + geofencing).                                                                   •  Reverse geocoding + ETA request to backend; automatic throttling based on motion/activity.                                                                                      •  User controls: schedule sharing windows, SOS stop, manual share, privacy settings.                                                                                                                                                                                                                                                                                 Backend Services                                                                                                                                                                   •  Auth & Device Registry: OAuth2/OIDC, device tokens, pair codes for receivers.                                                                                                   •  Ingest API: Accepts location payloads, validates rate limits, publishes to stream (Kafka/PubSub).                                                                               •  Processing Worker: Persists latest location in hot cache (Redis) + history in time-series (TimescaleDB/DynamoDB TSI). Computes ETA via Maps API, triggers                          geofence rules.                                                                                                                                                                 •  Notification Dispatcher: Fans out updates via WebSockets (TV app), FCM data messages, Webhook for voice skills, caches responses for voice queries.                             •  Query API: Serves pull requests (last known location, ETA, history slices) with RBAC per relationship.                                                                                                                                                                                                                                                             Receiver Clients                                                                                                                                                                   •  Android/Fire TV App: Auth via pairing code, subscribes to WebSocket channel, renders map/timeline, provides voice intent endpoint linking to Assistant.                         •  Google Assistant Action / Alexa Skill: Invoked via voice, hits Query API, formats “ETA + location + freshness”.                                                                 •  Mobile Receiver App (optional): Same API, push notifications for geofence events.                                                                                                                                                                                                                                                                                  Data Flow                                                                                                                                                                          1. Sharer app obtains fix → sends /locations payload.                                                                                                                              2. Backend validates, normalizes, pushes to stream.                                                                                                                                3. Worker writes to cache + history DB, calls maps API for ETA, evaluates geofences.                                                                                               4. Dispatcher pushes to subscribed devices; voice skill caches 1–2 min snapshot for fast response.                                                                                 5. Receiver (TV/voice) requests latest snapshot on demand; UI displays map/ETA.                                                                                                                                                                                                                                                                                       Storage & Integrations                                                                                                                                                             •  Hot cache: Redis/Memcached for O(1) latest lookup.                                                                                                                              •  History: Partitioned time-series DB (TTL policies).                                                                                                                             •  Maps/ETA: Google Maps Directions API with usage monitoring.                                                                                                                     •  Geocoding: On-demand reverse API, results cached.                                                                                                                               •  Secrets: Managed via KMS/Secrets Manager.                                                                                                                                                                                                                                                                                                                          Security & Privacy                                                                                                                                                                 •  Mutual consent pairing, per-device scopes, encrypted transport (TLS), signed payloads.                                                                                          •  User controls: pause sharing, timeboxed sessions, delete history (GDPR compliance).                                                                                             •  Rate limiting, anomaly detection, audit logs for access.                                                                                                                        •  Data retention policies + automated purge.                                                                                                                                                                                                                                                                                                                         Scalability & Reliability                                                                                                                                                          •  Auto-scaling ingest workers; partitioned streams for high throughput.                                                                                                           •  Graceful degradation: cached ETA when map API unavailable, retry with exponential backoff.                                                                                      •  Regional redundancy, fallback notification paths, health checks & circuit breakers.                                                                                                                                                                                                                                                                                Observability & Config                                                                                                                                                             •  Centralized logging (structured), metrics on ingestion latency, delivery SLAs.                                                                                                  •  Alerting on stale updates, push failures, API errors.                                                                                                                           •  Feature flags for rollout of geofencing, new clients.                                                                                                                           •  Configuration service for share intervals, geofence rules.                                                                                                                                                                                                                                                                                                         Testing & Compliance                                                                                                                                                               •  Unit/integration tests across mobile clients and backend services.                                                                                                              •  Load tests for ingest/dispatch.                                                                                                                                                 •  Security reviews, penetration testing, voice skill certification.
